df_bolsa_insuf_estr <- df_bolsa_insuf_estr %>%
separate_rows(bolsa_insuf_estr, sep = "\t")
# Reorders Bolsa Insuficiência ~
df_bolsa_insuf_estr$bolsa_insuf_estr <- factor(df_bolsa_insuf_estr$bolsa_insuf_estr, ordered = T,
levels = c("Trabalhei",
"Poupança",
"Fiz algum tipo de empréstimo",
"Contei com auxílio de familiares",
"Economizei com gastos básicos (comida, aluguel, etc) ",
"Usei auxílios governamentais ou da universidade",
"Usei cartão de crédito, resultando em dívida financeira",
"Outras estratégias"))
df_bolsa_insuf_estr <- spread(df_bolsa_insuf_estr, bolsa_insuf_estr)
df_bolsa_insuf_estr_long <- gather(df_bolsa_insuf_estr, key = "ID")
View(df_bolsa_insuf_estr_long)
df_bolsa_insuf_estr <- df %>%
select(bolsa_insuf_estr, ID)  %>%
separate_rows(bolsa_insuf_estr, sep = " ,")
# Corrects bolsa_insuf_estr ~
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Trabalhei", "\tTrabalhei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Poupança", "\tPoupança", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Outras", "\tOutras", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Contei", "\tContei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Usei", "\tUsei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub("a,Usei", "a\tUsei", df_bolsa_insuf_estr$bolsa_insuf_estr))
# Bolsa Insuficiência ~
df_bolsa_insuf_estr <- df_bolsa_insuf_estr %>%
separate_rows(bolsa_insuf_estr, sep = "\t")
# Reorders Bolsa Insuficiência ~
df_bolsa_insuf_estr$bolsa_insuf_estr <- factor(df_bolsa_insuf_estr$bolsa_insuf_estr, ordered = T,
levels = c("Trabalhei",
"Poupança",
"Fiz algum tipo de empréstimo",
"Contei com auxílio de familiares",
"Economizei com gastos básicos (comida, aluguel, etc) ",
"Usei auxílios governamentais ou da universidade",
"Usei cartão de crédito, resultando em dívida financeira",
"Outras estratégias"))
View(df_bolsa_insuf_estr)
merged_df <- merge(df, df_bolsa_insuf_estr, by = "ID", all = TRUE)
View(merged_df)
df_bolsa_insuf_estr <- df %>%
select(bolsa_insuf_estr, ID)  %>%
separate_rows(bolsa_insuf_estr, sep = " ,")
# Corrects bolsa_insuf_estr ~
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Trabalhei", "\tTrabalhei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Poupança", "\tPoupança", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Outras", "\tOutras", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Contei", "\tContei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Usei", "\tUsei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub("a,Usei", "a\tUsei", df_bolsa_insuf_estr$bolsa_insuf_estr))
# Bolsa Insuficiência ~
df_bolsa_insuf_estr <- df_bolsa_insuf_estr %>%
separate_rows(bolsa_insuf_estr, sep = "\t")
# Reorders Bolsa Insuficiência ~
df_bolsa_insuf_estr$bolsa_insuf_estr <- factor(df_bolsa_insuf_estr$bolsa_insuf_estr, ordered = T,
levels = c("Trabalhei",
"Poupança",
"Fiz algum tipo de empréstimo",
"Contei com auxílio de familiares",
"Economizei com gastos básicos (comida, aluguel, etc) ",
"Usei auxílios governamentais ou da universidade",
"Usei cartão de crédito, resultando em dívida financeira",
"Outras estratégias"))
merged_df <- merge(df, df_bolsa_insuf_estr, by = "ID", all = TRUE)
View(merged_df)
df_bolsa_insuf_estr <- df %>%
select(bolsa_insuf_estr, ID)  %>%
separate_rows(bolsa_insuf_estr, sep = " ,")
# Corrects bolsa_insuf_estr ~
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Trabalhei", "\tTrabalhei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Poupança", "\tPoupança", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Outras", "\tOutras", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Contei", "\tContei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Usei", "\tUsei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub("a,Usei", "a\tUsei", df_bolsa_insuf_estr$bolsa_insuf_estr))
# Bolsa Insuficiência ~
df_bolsa_insuf_estr <- df_bolsa_insuf_estr %>%
separate_rows(bolsa_insuf_estr, sep = "\t")
# Reorders Bolsa Insuficiência ~
df_bolsa_insuf_estr$bolsa_insuf_estr <- factor(df_bolsa_insuf_estr$bolsa_insuf_estr, ordered = T,
levels = c("Trabalhei",
"Poupança",
"Fiz algum tipo de empréstimo",
"Contei com auxílio de familiares",
"Economizei com gastos básicos (comida, aluguel, etc) ",
"Usei auxílios governamentais ou da universidade",
"Usei cartão de crédito, resultando em dívida financeira",
"Outras estratégias"))
merged_df <- merge(df, df_bolsa_insuf_estr, by = "ID")
View(df_bolsa_insuf_estr)
View(merged_df)
rm(list=ls())
# Loads packages ~
pacman::p_load(tidyverse, readxl, writexl, patchwork, cowplot, ggpubr, lemon, reshape2)
# Loads data ~
df <- read_excel("questionario_character.xlsx")[-1, ] %>%
filter(termo_consentimento == "Sim")
# Creates ID column ~
df <- cbind(ID = as.character(c(1:181)), df)
# Corrects Bolsa Modalidade ~
levels(df$bolsa_modalidade <- sub("Doutorado sanduíche", "Doutorado Sanduíche", df$bolsa_modalidade))
levels(df$bolsa_modalidade <- sub("Doutorado pleno no exterior", "Doutorado Pleno", df$bolsa_modalidade))
levels(df$bolsa_modalidade <- sub("Pós-doutorado no exterior", "Pós-doutorado", df$bolsa_modalidade))
levels(df$bolsa_modalidade <- sub("Outra modalidade", "Outra Modalidade", df$bolsa_modalidade))
# Corrects Residência ~
levels(df$residencia <- sub("Resido no exterior", "Resido no Exterior", df$residencia))
# Corrects País ~
levels(df$pais <- sub("Holanda", "Países Baixos", df$pais))
# Corrects Estado ~
df$estado <- ifelse(df$estado %in% NA, "Prefiro não declarar", df$estado)
# Reorders Estado ~
df$estado <- factor(df$estado, ordered = T,
levels = c("AM", "BA", "CE", "DF", "GO", "MG", "MS", "MT", "PB", "PE",
"PR", "RJ", "RN", "RS", "SE", "SC", "SP",
"Já morava no país de destino",
"Morava em um terceiro país",
"Prefiro não declarar"))
# Reorders País ~
df$pais <- factor(df$pais, ordered = T,
levels = c("Alemanha", "Bélgica", "Canadá", "Dinamarca", "Espanha", "Estados Unidos",
"França", "Itália", "Países Baixos", "Portugal",
"Reino Unido", "Suécia", "Outro"))
# Reorders Modalidade da bolsa ~
df$bolsa_modalidade <- factor(df$bolsa_modalidade, ordered = T,
levels = c("Doutorado Sanduíche",
"Doutorado Pleno",
"Pós-doutorado",
"Outra Modalidade"))
# Bolsa Insuficiência ~
df_bolsa_insuf_estr <- df %>%
select(bolsa_insuf_estr, ID)  %>%
separate_rows(bolsa_insuf_estr, sep = " ,")
# Corrects bolsa_insuf_estr ~
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Trabalhei", "\tTrabalhei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Poupança", "\tPoupança", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Outras", "\tOutras", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Contei", "\tContei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Usei", "\tUsei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub("a,Usei", "a\tUsei", df_bolsa_insuf_estr$bolsa_insuf_estr))
# Bolsa Insuficiência ~
df_bolsa_insuf_estr <- df_bolsa_insuf_estr %>%
separate_rows(bolsa_insuf_estr, sep = "\t")
# Reorders Bolsa Insuficiência ~
df_bolsa_insuf_estr$bolsa_insuf_estr <- factor(df_bolsa_insuf_estr$bolsa_insuf_estr, ordered = T,
levels = c("Trabalhei",
"Poupança",
"Fiz algum tipo de empréstimo",
"Contei com auxílio de familiares",
"Economizei com gastos básicos (comida, aluguel, etc) ",
"Usei auxílios governamentais ou da universidade Usei cartão de crédito, resultando em dívida financeira",
"Outras estratégias"))
View(df_bolsa_insuf_estr)
rm(list=ls())
# Loads packages ~
pacman::p_load(tidyverse, readxl, writexl, patchwork, cowplot, ggpubr, lemon, reshape2)
# Loads data ~
df <- read_excel("questionario_character.xlsx")[-1, ] %>%
filter(termo_consentimento == "Sim")
# Creates ID column ~
df <- cbind(ID = as.character(c(1:181)), df)
# Corrects Bolsa Modalidade ~
levels(df$bolsa_modalidade <- sub("Doutorado sanduíche", "Doutorado Sanduíche", df$bolsa_modalidade))
levels(df$bolsa_modalidade <- sub("Doutorado pleno no exterior", "Doutorado Pleno", df$bolsa_modalidade))
levels(df$bolsa_modalidade <- sub("Pós-doutorado no exterior", "Pós-doutorado", df$bolsa_modalidade))
levels(df$bolsa_modalidade <- sub("Outra modalidade", "Outra Modalidade", df$bolsa_modalidade))
# Corrects Residência ~
levels(df$residencia <- sub("Resido no exterior", "Resido no Exterior", df$residencia))
# Corrects País ~
levels(df$pais <- sub("Holanda", "Países Baixos", df$pais))
# Corrects Estado ~
df$estado <- ifelse(df$estado %in% NA, "Prefiro não declarar", df$estado)
# Reorders Estado ~
df$estado <- factor(df$estado, ordered = T,
levels = c("AM", "BA", "CE", "DF", "GO", "MG", "MS", "MT", "PB", "PE",
"PR", "RJ", "RN", "RS", "SE", "SC", "SP",
"Já morava no país de destino",
"Morava em um terceiro país",
"Prefiro não declarar"))
# Reorders País ~
df$pais <- factor(df$pais, ordered = T,
levels = c("Alemanha", "Bélgica", "Canadá", "Dinamarca", "Espanha", "Estados Unidos",
"França", "Itália", "Países Baixos", "Portugal",
"Reino Unido", "Suécia", "Outro"))
# Reorders Modalidade da bolsa ~
df$bolsa_modalidade <- factor(df$bolsa_modalidade, ordered = T,
levels = c("Doutorado Sanduíche",
"Doutorado Pleno",
"Pós-doutorado",
"Outra Modalidade"))
# Bolsa Insuficiência ~
df_bolsa_insuf_estr <- df %>%
select(bolsa_insuf_estr, ID)  %>%
separate_rows(bolsa_insuf_estr, sep = " ,")
# Corrects bolsa_insuf_estr ~
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Trabalhei", "\tTrabalhei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Poupança", "\tPoupança", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Outras", "\tOutras", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Contei", "\tContei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub(",Usei", "\tUsei", df_bolsa_insuf_estr$bolsa_insuf_estr))
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub("a,Usei", "a\tUsei", df_bolsa_insuf_estr$bolsa_insuf_estr))
# Bolsa Insuficiência ~
df_bolsa_insuf_estr <- df_bolsa_insuf_estr %>%
separate_rows(bolsa_insuf_estr, sep = "\t")
# Corrects bolsa_insuf_estr ~
levels(df_bolsa_insuf_estr$bolsa_insuf_estr <- sub("Economizei com gastos básicos (comida, aluguel, etc) ", "Economizei com gastos básicos (comida, aluguel, etc)", df_bolsa_insuf_estr$bolsa_insuf_estr))
# Reorders Bolsa Insuficiência ~
df_bolsa_insuf_estr$bolsa_insuf_estr <- factor(df_bolsa_insuf_estr$bolsa_insuf_estr, ordered = T,
levels = c("Trabalhei",
"Poupança",
"Fiz algum tipo de empréstimo",
"Contei com auxílio de familiares",
"Economizei com gastos básicos (comida, aluguel, etc) ",
"Usei auxílios governamentais ou da universidade Usei cartão de crédito, resultando em dívida financeira",
"Outras estratégias"))
View(df_bolsa_insuf_estr)
citation()
install.packages("chattr")
install.packages("tinytex")
tinytex::install_tinytex()
install.packages("rmarkdown")
### The BEGINNING ~~~~~
##
# Plots SBBE -- Map | Written by George Pacheco ~
# Cleans environment ~
rm(list=ls())
# Sets working directory ~
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
# Loads packages ~
pacman::p_load(tidyverse, ggtext, ggstar, ggrepel, shadowtext, readxl, writexl, cowplot, patchwork, ggpubr, lemon, reshape2, writexl, stringr, lubridate,
geobr, ggspatial, showtext, png, extrafont, sf, ggiraphExtra, fontawesome, shiny, DT,
rvest, stringr, purrr, tibble, dplyr, extrafont, emojifont, grid, rsvg, ggimage)
# Loads extra fonts ~
loadfonts()
font_add_google("Barlow", "Barlow")
font_add_google("Cormorant Garamond", "Cormorant")
showtext_auto()
# Loads data ~
fulldf <- read.csv("./SBBELists/SBBEmembers--09jul25.csv", header = TRUE, stringsAsFactors = FALSE, sep = ",")
# Loads data ~
extra <- read_excel("./SBBELists/SBBE24_InscriçõesExtraordinárias_R.xlsx")
normal <- read_excel("./SBBELists/ListaParticipante_18-12-2024_11-47-55.xlsx") %>%
dplyr::filter(Inscrição == "Aprovado") %>%
dplyr::filter(Categoria != "Curso Galaxy - Apenas para inscritos no congresso") %>%
dplyr::filter(!ID %in% extra$ID) %>%
dplyr::rename(Sub_Area = `Sub Área`)
# Merges data frames ~
Attendees_df <- rbind(extra, normal)
Attendees_df <- Attendees_df %>%
dplyr::select(Nome, ID, Categoria, `Nome Crachá`, UF, Cidade, `Instituição`, `Gênero`)
# Gets Stage ~
fulldf$Stage <- ifelse(grepl("Profissional", fulldf$Labels), "Profissional",
ifelse(grepl("Pos-Graduacao", fulldf$Labels), "Pós-graduação",
ifelse(grepl("Graduacao", fulldf$Labels), "Graduação", NA)))
fulldfUp <- fulldf %>%
dplyr::select(Name, Stage, Gender, State, Institution) %>%
mutate(Data = "Members") %>%
mutate(`Nome Crachá` = "") %>%
mutate(ID = "")
Attendees_dfUp <- Attendees_df %>%
dplyr::rename(Name = Nome, State = UF, Institution = `Instituição`, Name = Nome, Gender = `Gênero`, Stage = Categoria) %>%
dplyr::select(Name, Stage, Gender, State, Institution, `Nome Crachá`, ID) %>%
mutate(Data = "Attendees")
# Combines data frames ~
fulldfUltra <- rbind(fulldfUp, Attendees_dfUp)
# Corrects Nome Crachá ~
fulldfUltra$`Nome Crachá` <- ifelse(fulldfUltra$Name %in% c("Fernanda de Pinho Werneck"), "Fernanda Werneck", fulldfUltra$`Nome Crachá`)
fulldfUltra$`Nome Crachá` <- ifelse(fulldfUltra$Name %in% c("Jose Alexandre Felizola Diniz Filho"), "Jose Diniz-Filho", fulldfUltra$`Nome Crachá`)
fulldfUltra$`Nome Crachá` <- ifelse(fulldfUltra$Name %in% c("Clarisse Palma da Silva"), "Clarisse Palma-Silva", fulldfUltra$`Nome Crachá`)
fulldfUltra$`Nome Crachá` <- ifelse(fulldfUltra$Name %in% c("Andrea Pedrosa Harand"), "Andrea Pedrosa Harand", fulldfUltra$`Nome Crachá`)
fulldfUltra$`Nome Crachá` <- ifelse(fulldfUltra$Name %in% c("Prof. Dr. Frederico Henning"), "Frederico Henning", fulldfUltra$`Nome Crachá`)
fulldfUltra$`Nome Crachá` <- ifelse(fulldfUltra$Name %in% c("Eduardo Tarazona"), "Eduardo Tarazona", fulldfUltra$`Nome Crachá`)
fulldfUltra$`Nome Crachá` <- ifelse(fulldfUltra$Name %in% c("Fabricio Santos"), "Fabrício R. Santos", fulldfUltra$`Nome Crachá`)
# Corrects Nome Crachá ~
fulldfUltra$Stage <- ifelse(fulldfUltra$Name %in% c("Thomaz Pinotti"), "Mestrando, Doutorando e Pós doutorando", fulldfUltra$Stage)
fulldfUltra$State <- ifelse(fulldfUltra$Name %in% c("Jeferson Duran Fuentes"), "SP", fulldfUltra$State)
# Corrects UF ~
levels(fulldfUltra$State <- gsub("Rio Grande do Sul", "RS", fulldfUltra$State))
levels(fulldfUltra$State <- gsub("Goias", "GO", fulldfUltra$State))
levels(fulldfUltra$State <- gsub("Iowa", "SP", fulldfUltra$State))
# Corrects UF speakers ~
fulldfUltra$State <- ifelse(fulldfUltra$ID %in% c("12821302"), "RS",
ifelse(fulldfUltra$ID %in% c("9314289"), "PR",
ifelse(fulldfUltra$ID %in% c("9176759"), "SP",
ifelse(fulldfUltra$ID %in% c("16590615"), "MG", fulldfUltra$State))))
# Corrects UF speakers ~
fulldfUltra$State <- ifelse(fulldfUltra$`Nome Crachá` %in% c("ALENA MAYO INIGUEZ", "Frederico Henning"), "RJ",
ifelse(fulldfUltra$`Nome Crachá` %in% c("Fernanda Werneck"), "AM",
ifelse(fulldfUltra$`Nome Crachá` %in% c("Eduardo Tarazona", "Fabrício Santos", "Luiz Bem"), "MG",
ifelse(fulldfUltra$`Nome Crachá` %in% c("Ana Tourinho"), "MT",
ifelse(fulldfUltra$`Nome Crachá` %in% c("Jose Diniz-Filho"), "GO",
ifelse(fulldfUltra$`Nome Crachá` %in% c("Andrea Pedrosa Harand"), "PE",
ifelse(fulldfUltra$`Nome Crachá` %in% c("Maria Yamamoto", "Felipe de Oliveira Torquato"), "RN",
ifelse(fulldfUltra$`Nome Crachá` %in% c("Clarisse Palma-Silva", "Nelio Bizzo", "Mario Pinna", "Tábita Hünemeier", "Tiago Quental"), "SP",
ifelse(fulldfUltra$`Nome Crachá` %in% c("waldemir rosa"), "PR",
ifelse(fulldfUltra$`Nome Crachá` %in% c("Kateryna Makov", "Kelly Zamudio", "Santiago Vieyra", "Thomaz Pinotti"), "Estrangeiro", fulldfUltra$State))))))))))
# Corrects State ~
fulldfUltra$State <- ifelse(fulldfUltra$Name %in% c("Alex Anderson Antony Bandeira de Carvalho",
"Ana Flávia Konig Braz",
"Bruna Debas Brito",
"Deborah Miho Chinen Toyomoto",
"Eduarda Maria de Melo de Faria",
"Gabriele Tomaz Vieira",
"George Pacheco",
"Gustavo Henrique Lopes",
"Ingrid Lavínia Malosti Vieira",
"Lucas Rafael Cabral Jara",
"Luiza Teixeira da Silva",
"Maria Clara Andrade dos Santos",
"Melissa Vitória Flórido",
"Rafael Sartori Lam",
"Ramon Trindade Urbano",
"rebeca Taborda Ribas Matos",
"Sofia Demétrio Nicolau",
"Vinícius Castro Burgo"), "Exterior", fulldfUltra$State)
# Corrects State ~
fulldfUltra$State <- ifelse(fulldfUltra$State %in% c(NA, "Aberdeen City", "california", "Florida", "Misiones", "Texas",
"Córdoba", "Provincia de Buenos Aires", "Ontario", "Capital Federal", "La Libertad"), "Exterior", fulldfUltra$State)
# Corrects Category ~
levels(fulldfUltra$Stage <- sub("CBBE", "SBBE24", fulldfUltra$Stage))
# Converts Nome Crachá to lowercase ~
fulldfUltra$Badge <- tolower(fulldfUltra$`Nome Crachá`)
# Orders df based on Badge ~
fulldfUltra <- fulldfUltra[order(fulldfUltra$Badge), ]
# Gets counts of occurrences ~
NameCounts <- table(fulldfUltra$Badge)
# Prints repeated entries ~
NameCounts[NameCounts > 1]
# Defines entries to exclude ~
RowsToKeep <- !((grepl("alessandra p. lamarca|carlos guerra schrago|clarisse palma-silva|fabrício r. santos|fabricius domingos|fernando sotero|iris hass|nelio bizzo", fulldfUltra$Badge) & fulldfUltra$Stage == "Profissional") |
(grepl("meari caldeira", fulldfUltra$Badge) & fulldfUltra$Stage == "Mestrando, Doutorando e Pós doutorando") |
(grepl("lucca fanti", fulldfUltra$Badge) & fulldfUltra$Stage == "Estudante de Graduação"))
# Excludes repeated entries ~
fulldfUltra <- fulldfUltra[RowsToKeep, ]
# Corrects Categoria for repeated entries  ~
fulldfUltra$Stage <- ifelse(fulldfUltra$Badge %in% c("alessandra p. lamarca|carlos guerra schrago|clarisse palma-silva|fabrício r. santos|fabricius domingos|fernando sotero|iris hass|nelio bizzo"), "Profissional + Membro fundador da SBBE", fulldfUltra$Stage)
fulldfUltra$Stage <- ifelse(fulldfUltra$Badge %in% c("meari caldeira"), "Mestrando, Doutorando e Pós doutorando + Membro fundador da SBBE", fulldfUltra$Stage)
fulldfUltra$Stage <- ifelse(fulldfUltra$Badge %in% c("lucca fanti"), "Estudante de Graduação + Membro fundador da SBBE", fulldfUltra$Stage)
# Corrects Institution & State for better visualisation ~
levels(fulldfUltra$Institution <- gsub("Universidade|Universidad|University", "Uni.", fulldfUltra$Institution))
levels(fulldfUltra$Institution <- gsub("Instituto|Institute", "Inst.", fulldfUltra$Institution))
levels(fulldfUltra$State <- gsub("Estrangeiro", "Exterior", fulldfUltra$State))
# Corrects Gender ~
fulldfUltra$Gender <- ifelse(fulldfUltra$Gender %in% c("M", "Masculino"), "Masculino",
ifelse(fulldfUltra$Gender %in% c("F", "Feminino"), "Feminino",
ifelse(fulldfUltra$Gender %in% c("O", "Outro"), "Outro", "Error")))
# Defines the custom capitalization function ~
capitalize_words <- function(text) {
words <- str_split(text, " ")[[1]]
exclude_patterns <- c("of", "de", "da", "do", "ABC", "Não-binário", "and", "(EUA)")
patterns_map <- setNames(exclude_patterns, tolower(exclude_patterns))
words <- sapply(words, function(word) {
word_lower <- tolower(word)
if (word_lower %in% names(patterns_map)) {
patterns_map[[word_lower]]}
else {str_to_title(word)}})
str_c(words, collapse = " ")}
# Apply the function to the pattern column
fulldfUltra$Name <- sapply(fulldfUltra$Name , capitalize_words)
fulldfUltra$Institution <- sapply(fulldfUltra$Institution , capitalize_words)
fulldfUltra$Gender <- sapply(fulldfUltra$Gender, capitalize_words)
# Sets all Brazilian states ~
AllBRLStates <- c("AC", "AP", "AM", "PA", "RO", "RR", "TO",
"BA", "CE", "MA", "PB", "PE", "PI", "RN", "SE", "AL",
"GO", "MT", "MS", "DF",
"ES", "MG", "RJ", "SP",
"PR", "RS", "SC", "Exterior")
# Sets all Brazilian regions ~
AllBRLRegions <- c("Norte", "Nordeste", "Centro-Oeste", "Sudeste", "Sul", "Exterior")
# Defines a common set of levels and ordering for Variable ~
variable_levels <- c("AC", "AP", "AM", "PA", "RO", "RR", "TO",
"BA", "CE", "MA", "PB", "PE", "PI", "RN", "SE", "AL",
"GO", "MT", "MS", "DF",
"ES", "MG", "RJ", "SP",
"PR", "RS", "SC",
"Profissional",
"Pós-graduação",
"Graduação",
"Dias até o SBBE24",
"Seguidores no Bluesky",
"Seguidores no X",
"Seguidores no Instagram",
"Instituições representadas na SBBE",
"Afiliados à SBBE",
"Okinawa Inst. of Science and Technology",
"Uni. of Ottawa",
"Pennsylvania State Uni.",
"Uni. of Texas",
"Texas A&M Uni.",
"Uni. of California — Los Angeles",
"Rice Uni.",
"Uni. of West Florida",
"Uni. of Aberdeen",
"Uni. of Oslo",
"Uni. of Copenhagen",
"Uni. Nacional de Misiones",
"Uni. Nacional de Trujillo",
"Inst. de Biología Subtropical",
"Inst. Multidisciplinario de Biología Vegetal",
"Uni. Nacional de Córdoba",
"Uni. de Buenos Aires",
"Uni. Federal de Santa Maria",
"Uni. Federal do Rio Grande",
"Uni. Federal de Pelotas",
"Uni. Federal de Ciências da Saúde de Porto Alegre",
"Uni. Federal do Rio Grande do Sul",
"Pontifícia Uni. Católica do Rio Grande do Sul",
"Uni. Federal da Integração Latino-Americana",
"Uni. Estadual de Maringá",
"Centro Universitário Claretiano",
"Uningá",
"Museu de História Natural Capão da Imbuia",
"Inst. Carlos Chagas — Fiocruz Paraná",
"Uni. Estadual de Ponta Grossa",
"Uni. Estadual do Centro-Oeste do Paraná",
"Secretaria de Educação do Estado do Paraná",
"Inst. Federal — Paraná",
"Uni. Tecnológica Federal do Paraná",
"Pontifícia Uni. Católica do Paraná",
"Uni. Federal do Paraná",
"Hospital Regional Hans Dieter Schmidt",
"Centro Universitário Leonardo da Vinci",
"Uni. da Região de Joinville",
"Uni. Federal de Santa Catarina",
"Uni. do Vale do Paraíba",
"Inst. Butantan",
"Uni. do Vale do Itajaí",
"Uni. Santo Amaro",
"Uni. do Oeste Paulista",
"Uni. de Mogi Das Cruzes",
"Uni. Federal de São Carlos",
"Uni. Federal do ABC",
"Uni. Federal de São Paulo",
"Uni. de São Paulo",
"Uni. Estadual de Campinas",
"Uni. Estadual Paulista",
"Unisãojosé",
"Uni. Estadual do Norte Fluminense Darcy Ribeiro",
"Inst. Oswaldo Cruz",
"Uni. Federal do Rio de Janeiro",
"Uni. do Estado do Rio de Janeiro",
"Uni. Federal do Espírito Santo",
"Inst. Nacional da Mata Atlântica",
"Pontifícia Uni. Católica de Minas Gerais",
"Uni. Federal de Uberlândia",
"Uni. Federal do Triângulo Mineiro",
"Uni. Federal de Juiz de Fora",
"Uni. do Estado de Minas Gerais",
"Uni. Federal de Minas Gerais",
"Uni. Federal de Lavras",
"Uni. Federal de Viçosa",
"Uni. Federal de São João Del-Rei",
"Uni. Federal de Jataí",
"Empresa Brasileira de Pesquisa Agropecuária",
"Uni. de Brasília",
"Uni. Federal de Goiás",
"Uni. Estadual de Goiás",
"Uni. do Estado de Mato Grosso",
"Uni. Federal de Mato Grosso",
"Uni. Federal de Mato Grosso do Sul",
"Uni. Federal da Grande Dourados",
"Uni. Estadual de Santa Cruz",
"Uni. Federal da Bahia",
"Uni. Estadual de Feira de Santana",
"Uni. Federal do Recôncavo da Bahia",
"Uni. Estadual do Sudoeste da Bahia",
"Uni. Federal do Maranhão",
"Uni. Federal de Sergipe",
"Uni. Federal de Alagoas",
"Uni. Federal do Vale do São Francisco",
"Uni. de Pernambuco",
"Inst. Aggeu Magalhães — Fiocruz Pernambuco",
"Inst. Federal — Pernambuco",
"Uni. Federal de Pernambuco",
"Uni. Estadual da Paraíba",
"Uni. Federal da Paraíba",
"Uni. Federal do Rio Grande do Norte",
"Museu Paraense Emílio Goeldi",
"Uni. Federal do Pará",
"Inst. Nacional de Pesquisas da Amazônia",
"Uni. Federal do Amazonas",
"Feminino",
"Masculino",
"Outro",
"Exterior",
"Sul",
"Sudeste",
"Centro-Oeste",
"Nordeste",
"Norte")
# Checks missing Institution ~
setdiff(fulldfUltra$Institution[fulldfUltra$Data == "Members"], variable_levels)
# Expands fulldf by creating Region ~
fulldfUltra$Region <- ifelse(fulldfUltra$State %in% c("AC", "AM", "AP", "PA", "RR", "RO", "TO"), "Norte",
ifelse(fulldfUltra$State %in% c("MA", "PI", "CE", "RN", "PB", "PE", "AL", "SE", "BA"), "Nordeste",
ifelse(fulldfUltra$State %in% c("DF", "GO", "MT", "MS"), "Centro-Oeste",
ifelse(fulldfUltra$State %in% c("MG", "ES", "RJ", "SP"), "Sudeste",
ifelse(fulldfUltra$State %in% c("PR", "RS", "SC"), "Sul",
ifelse(fulldfUltra$State %in% c("Exterior"), "Exterior", "Error"))))))
# Gets general numbers ~
fulldf_Descriptive <- subset(fulldfUltra, Data == "Members") %>%
summarise("Afiliados à SBBE" = n_distinct(Name),
"Instituições representadas na SBBE" = n_distinct(Institution),
"Seguidores no Instagram" = 1922,
"Seguidores no Bluesky" = 29) %>%
mutate(Stats = "General") %>%
pivot_longer(cols = -Stats, names_to = "Variable", values_to = "Percentage") %>%
mutate(n = 0) %>%
relocate(n, .before = Percentage) %>%
relocate(Stats, .after = Percentage) %>%
mutate(Variable = factor(Variable, levels = variable_levels, ordered = TRUE))
View(fulldf_Descriptive)
